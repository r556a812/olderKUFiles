<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Quash Shell: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quash Shell
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">A simple yet powerfull shell program</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Quash Shell Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><blockquote class="doxtable">
<h1>EECS 678 - Project 1 - Quash Shell</h1>
<p></p>
</blockquote>
<h2>Introduction</h2>
<p>In this project, you will complete the Quite a Shell (quash) program using the UNIX system calls. You may work in groups of 2. The purpose of this project is as follows:</p>
<ul>
<li>Getting familiar with the Operating System (UNIX) interface.</li>
<li>Exercising UNIX system calls.</li>
<li>Understanding the concept of a process from the user point of view.</li>
</ul>
<p>A skeleton has been provided, but it lacks most of the core functionality one would expect from a shell program. Quash should behave similar to csh, bash or other popular shell programs.</p>
<h2>Installation</h2>
<p>To build Quash use: </p><blockquote class="doxtable">
<p><code>make</code> </p>
</blockquote>
<p>To generate this documentation in HTML and LaTeX use: </p><blockquote class="doxtable">
<p><code>make doc</code> </p>
</blockquote>
<p>To clean quash use: </p><blockquote class="doxtable">
<p><code>make clean</code> </p>
</blockquote>
<h2>Usage</h2>
<p>To run Quash use: </p><blockquote class="doxtable">
<p><code>./quash</code> </p>
</blockquote>
<p>or </p><blockquote class="doxtable">
<p><code>make test</code> </p>
</blockquote>
<h2>Features</h2>
<p><em><b>The main file you will modify is <a class="el" href="execute_8c.html" title="Implements interface functions between Quash and the environment and functions that interpret an exec...">src/execute.c</a>. You may not use or modify files in the src/parsing directory, with the notable exception of the <a class="el" href="parsing__interface_8h.html#a659361d40550d9776b6ea7fa69a836ce" title="Cleanup memory dynamically allocated by the parser. ">destroy_parser()</a> function in src/parsing/parse_interface.c if necessary. Your output should match our example result files exactly.</b></em></p>
<p>The following features should be implemented in Quash:</p>
<ul>
<li>Quash should be able to run executables (the basic function of a shell) with command line parameters</li>
<li>If the executable is not specified in the absolute or relative path format (starting with sequences of ‘/’, './', or '../'), quash should search the directories in the environment variable PATH (see below). If no executable file is found, quash should print an error message to standard error. Quash should allow both foreground and background executions. Character ‘&amp;’ is used to indicate background execution. Commands without ‘&amp;’ are assumed to run in foreground.<ul>
<li>When a command is run in the background, quash should print: "Background
      job started: [JOBID]    PID    COMMAND"</li>
<li>When a background command finishes, quash should print: "Completed:
      [JOBID]    PID    COMMAND"</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[QUASH]$ program1 &amp;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;Background job started: [1]    2342    program1 &amp;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;[QUASH]$ ls</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;Documents Downloads</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;Completed: [1]    2342    program1 &amp;</div></div><!-- fragment --><ul>
<li>Quash should implement I/O redirection. The <code>&lt;</code> character is used to redirect the standard input from a file. The <code>&gt;</code> character is used to redirect the standard output to a file while truncating the file. The <code>&gt;&gt;</code> string is used to redirect the standard output to a file while appending the output to the end of the file.</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[QUASH]$ echo Hello Quash! &gt; a.txt  # Write &quot;Hello Quash!\n&quot; to a file</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;[QUASH]$ cat a.txt</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;Hello Quash!</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;[QUASH]$ echo Hey Quash! &gt; a.txt  # Truncate the previous contents of a.txt and write &quot;Hey Quash!\n&quot; to the file</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;[QUASH]$ cat a.txt          # Print file contents. If we didn&#39;t actually truncate we would see &quot;Hey Quash!h!\n&quot; as the output of this command.</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;Hey Quash!</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;[QUASH]$ cat &lt; a.txt        # Make cat read from a.txt via standard in</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;Hey Quash!</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;[QUASH]$ cat &lt; a.txt &gt; b.txt  # Multiple redirect. Read from a.txt and write to b.txt.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;[QUASH]$ cat b.txt</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;Hey Quash!</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;[QUASH]$ cat a.txt &gt;&gt; b.txt  # Append output of a.txt to b.txt</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;[QUASH]$ cat b.txt</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;Hey Quash!</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;Hey Quash!</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;[QUASH]$</div></div><!-- fragment --><ul>
<li>Quash should support pipes <code>|</code>.</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[QUASH]$ cat src/quash.c | grep running</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;// Check if loop is running</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;bool is_running() {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  return state.running;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  state.running = false;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  while (is_running()) {</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;[QUASH]$ cat src/quash.c | grep running | grep return</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  return state.running;</div></div><!-- fragment --><h3>Built-in Functions</h3>
<p>All built-in commands should be implemented in quash itself. They cannot be external programs of any kind. Quash should support the following built-in functions:</p>
<ul>
<li><code>echo</code> - Print a string given as an argument. The output format should be the same as bash (a string followed by new line '\n')</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[QUASH]$ echo Hello world! &#39;How are you today?&#39;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;Hello world! How are you today?</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;[QUASH]$ echo $HOME/Development</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;/home/jrobinson/Development</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;[QUASH]$</div></div><!-- fragment --><ul>
<li>export - Sets the value of an environment variable. Quash should support reading from and writing to environment variables.</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[QUASH]$ export PATH=/usr/bin:/bin  # Set the PATH environment variable</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;[QUASH]$ echo $PATH                 # Print the current value of PATH</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;/usr/bin:/bin</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;[QUASH]$ echo $HOME</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;/home/jrobinson</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;[QUASH]$ export PATH=$HOME  # Set the PATH environment variable to the value of HOME</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;[QUASH]$ echo $PATH         # Print the current value of PATH</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;/home/jrobinson</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;[QUASH]$</div></div><!-- fragment --><ul>
<li><code>cd</code> - Change current working directory. This updates both the actual working directory and the PWD environment variable.</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[QUASH]$ echo $PWD</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;/home/jrobinson</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;[QUASH]$ cd ..              # Go up one directory</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;[QUASH]$ echo $PWD</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;/home</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;[QUASH]$ cd $HOME           # Go to path in the HOME environment variable</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;/home/jrobinson</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;[QUASH]$</div></div><!-- fragment --><ul>
<li><code>pwd</code> - Print the absolute path of the current working directory. Make sure you are printing out the actual working directory and not just the PWD environment variable.</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[QUASH]$ pwd                # Print the working directory</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;/home/jrobinson</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;[QUASH]$ echo $PWD          # Print the PWD environment variable</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;/home/jrobinson</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;[QUASH]$ export PWD=/usr    # Change the PWD environment variable</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;[QUASH]$ pwd</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;/home/jrobinson</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;[QUASH]$ echo $PWD</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;/usr</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;[QUASH]$</div></div><!-- fragment --><ul>
<li><code>quit</code> &amp; <code>exit</code> - Use these to terminate quash. These are already implemented for you.</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[BASH]$ ./quash</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;Welcome...</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;[QUASH]$ exit</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;[BASH]$ ./quash</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;Welcome...</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;[QUASH]$ quit</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;[BASH]$</div></div><!-- fragment --><ul>
<li><code>jobs</code> - Should print all of the currently running background processes in the format: "[JOBID] PID COMMAND" where JOBID is a unique positive integer quash assigns to the job to identify it, PID is the PID of the child process used for the job, and COMMAND is the command used to invoke the job.</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[QUASH]$ find -type f | grep &#39;*.c&#39; &gt; out.txt &amp;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;Background job started: [1]    2342    find / -type f | grep &#39;*.c&#39; &gt; out.txt &amp;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;[QUASH]$ sleep 15 &amp;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;Background job started: [2]    2343    sleep 15 &amp;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;[QUASH]$ jobs               # List currently running background jobs</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;[1]    2342    find / -type f | grep &#39;*.c&#39; &gt; out.txt &amp;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;[2]    2343    sleep 15 &amp;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;[QUASH]$</div></div><!-- fragment --><h2>Useful System Calls and Library Functions</h2>
<p>The following is a list and brief description of some system calls and library functions you may want to use and their respective man page entries. Note that this list may not be exhaustive, but be sure what ever library functions you use will run on the lab machines:</p>
<ul>
<li>chdir(2) - Changes the current working directory</li>
<li>close(2) - Closes a file descriptor</li>
<li>dup2(2) - Copies a file descriptor into a specified entry in the file descriptor table</li>
<li>execvp(3) - Replaces the current process with a new process</li>
<li>fork(2) - Creates a new process by duplicating the calling process</li>
<li>getenv(3) - Reads an environment variable from the current process environment</li>
<li>getwd(3) - Gets the current working directory as a string (get_current_dir_name(3) may be easier to use)</li>
<li>get_current_dir_name(3) - Gets the current working directory and stores it in a newly allocated string</li>
<li>kill(2) - Sends a signal to a process with a given pid</li>
<li>open(2) - Opens a file descriptor with an entry at the specified path in the file system</li>
<li>pipe(2) - Creates a unidirectional communication pathway between two processes</li>
<li>printf(3) - Prints to the screen</li>
<li>realpath(3) - Resolves a relative path string to its equivalent absolute path string</li>
<li>setenv(3) - Sets an environment variable in the current process environment</li>
<li>waitpid(2) - Waits or polls for a process with a given pid to finish</li>
</ul>
<p>You may NOT use the system(3) function anywhere in your project</p>
<h2>Grading Policy</h2>
<p>Partial credit will be given for incomplete programs. However, a program that cannot compile will get 0 points. The feature tests are placed into multiple tiers of completeness. The output to standard out from your code must match our output exactly, except for whitespace, for the next tier of grading to be accessible. This is due to reliance of previous tiers in subsequent tier tests. If we cannot run your code in one tier then it becomes far more difficult test later tiers. The point breakdown for features is below:</p>
<table class="doxtable">
<tr>
<th>Description  </th><th>Score   </th></tr>
<tr>
<td><ul>
<li>
Tier 0  <ul>
<li>
Quash compiles  </li>
</ul>
</li>
</ul>
</td><td>10%   </td></tr>
<tr>
<td><ul>
<li>
Tier 1  <ul>
<li>
Single commands without arguments (ls)  </li>
<li>
Simple built-in commands  <ul>
<li>
pwd  </li>
<li>
echo with a single argument  </li>
</ul>
</li>
</ul>
</li>
</ul>
</td><td>30%   </td></tr>
<tr>
<td><ul>
<li>
Tier 2  <ul>
<li>
Single commands with arguments (ls -a /)  </li>
<li>
Built-in commands  <ul>
<li>
echo with multiple arguments  </li>
<li>
cd  </li>
<li>
export  </li>
</ul>
</li>
<li>
Environment Variables  <ul>
<li>
echo with environment variables (echo $HOME)  </li>
<li>
Execution with environment variables (du -H $PWD/..) </li>
</ul>
</li>
</ul>
</li>
</ul>
</td><td>30%   </td></tr>
<tr>
<td><ul>
<li>
Tier 3  <ul>
<li>
Built-in commands  <ul>
<li>
jobs  </li>
<li>
kill  </li>
</ul>
</li>
<li>
Piping output between one command and another (find -type f | grep '*.c')  </li>
<li>
<a class="el" href="structRedirect.html" title="Intermediate parsing structure used to determine the final configuration of the redirects in a comman...">Redirect</a> standard input to any command from file (cat &lt; a.txt)  </li>
<li>
<a class="el" href="structRedirect.html" title="Intermediate parsing structure used to determine the final configuration of the redirects in a comman...">Redirect</a> standard output from a command to a file (cat b.txt &gt; a.txt)  </li>
<li>
Background processes  <ul>
<li>
Job completion notification  </li>
</ul>
</li>
</ul>
</li>
</ul>
</td><td>30%   </td></tr>
<tr>
<td><ul>
<li>
Tier 4 (extra credit)  <ul>
<li>
Pipes and redirects can be mixed (cat &lt; a.txt | grep -o World | cat &gt; b.txt)  </li>
<li>
Pipes and redirects work with built-in commands  </li>
<li>
Append redirection (cat a.txt | grep -o World &gt;&gt; b.txt)  </li>
</ul>
</li>
</ul>
</td><td>10%   </td></tr>
<tr>
<td><ul>
<li>
Valgrind Memory Errors  <ul>
<li>
While not ideal, you will not lose any points for "still reachable" blocks  </li>
<li>
Unacceptable Memory Leaks  <ul>
<li>
Definately lost  </li>
<li>
Indirectly lost  </li>
<li>
Possibly lost  </li>
</ul>
</li>
<li>
Unacceptable Access Violations  <ul>
<li>
Invalid Read  </li>
<li>
Invalid Write  </li>
<li>
Invalid free  </li>
<li>
Use of uninitialized values  </li>
</ul>
</li>
</ul>
</li>
</ul>
</td><td>-5% from tier grade down to 0% for each tier with violations   </td></tr>
</table>
<h2>Submission</h2>
<p>Each group should submit the project to your TA via Blackboard. Create a zip file of your code using "make submit". You should also check that the zipped project still builds and runs correctly after building the submit target with "make unsubmit". Your TA will be using this command to extract and build your project so make sure it works correctly. If you modify either of these targets, please ensure all file extensions are renamed to ".txt" in the submission and extract correctly with the unsubmit target.</p>
<h2>Miscellaneous</h2>
<p>Start early! You need to use C language to implement this project. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
